# 🎯 Групування фото за мітками

## 📋 **Огляд групування:**

### **Типи групування:**

- **За мітками** - групування фото за типом мітки (ДО/ПІСЛЯ/ЗАГАЛЬНІ)
- **За парами** - групування фото в пари (3 "До" + 3 "Після")

### **Візуальне групування:**

```
┌─────────────────────────────────────┐
│              ДО 1                   │
│ [Фото1] [Фото2] [Фото3]            │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│            ПІСЛЯ 1                  │
│ [Фото4] [Фото5] [Фото6]            │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│              ДО 2                   │
│ [Фото7] [Фото8] [Фото9]            │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│            ПІСЛЯ 2                  │
│ [Фото10] [Фото11] [Фото12]         │
└─────────────────────────────────────┘
```

---

## 🔧 **Реалізація:**

### **1. Компонент GroupedPhotos:**

```typescript
interface GroupedPhotosProps {
  photos: Photo[];
  onDeletePhoto: (photoId: string) => void;
  showTag?: boolean;
  groupBy?: "tag" | "pair";
}
```

### **2. Групування за мітками:**

```typescript
const groupPhotosByTag = (photos: Photo[]) => {
  const groups: { [key: string]: Photo[] } = {
    before: [],
    after: [],
    general: [],
  };

  photos.forEach((photo) => {
    const tag = photo.tag || "general";
    if (groups[tag]) {
      groups[tag].push(photo);
    }
  });

  return groups;
};
```

### **3. Групування за парами (3 ДО + 3 ПІСЛЯ):**

```typescript
const groupPhotosBySequential = (photos: Photo[]) => {
  const beforePhotos = photos
    .filter((photo) => photo.tag === "before")
    .sort(
      (a, b) =>
        new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime()
    );

  const afterPhotos = photos
    .filter((photo) => photo.tag === "after")
    .sort(
      (a, b) =>
        new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime()
    );

  const groups = [];
  const maxPairs = Math.min(
    Math.floor(beforePhotos.length / 3),
    Math.floor(afterPhotos.length / 3)
  );

  // Створюємо пари: 3 ДО + 3 ПІСЛЯ
  for (let i = 0; i < maxPairs; i++) {
    const beforeGroup = beforePhotos.slice(i * 3, (i + 1) * 3);
    const afterGroup = afterPhotos.slice(i * 3, (i + 1) * 3);

    if (beforeGroup.length === 3 && afterGroup.length === 3) {
      // Додаємо групу "ДО"
      groups.push({
        id: `before-${i + 1}`,
        type: "before",
        photos: beforeGroup,
        title: `ДО ${i + 1}`,
      });

      // Додаємо групу "ПІСЛЯ"
      groups.push({
        id: `after-${i + 1}`,
        type: "after",
        photos: afterGroup,
        title: `ПІСЛЯ ${i + 1}`,
      });
    }
  }

  return groups;
};
```

---

## 🎨 **Візуальне оформлення:**

### **1. Заголовки груп:**

```typescript
const getTagColor = (tag: string) => {
  switch (tag) {
    case "before":
      return "bg-blue-50 border-blue-200";
    case "after":
      return "bg-green-50 border-green-200";
    case "general":
      return "bg-gray-50 border-gray-200";
    default:
      return "bg-gray-50 border-gray-200";
  }
};

const getTagText = (tag: string) => {
  switch (tag) {
    case "before":
      return "ДО";
    case "after":
      return "ПІСЛЯ";
    case "general":
      return "ЗАГАЛЬНІ";
    default:
      return "БЕЗ МІТКИ";
  }
};
```

### **2. Розділювачі між групами:**

```typescript
{
  /* Розділювач */
}
<div className="flex items-center justify-center my-6">
  <div className="flex-1 border-t-2 border-gray-300"></div>
  <div className="px-4 text-gray-500 font-semibold">↓</div>
  <div className="flex-1 border-t-2 border-gray-300"></div>
</div>;
```

### **3. Сітка фото:**

```typescript
<div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
  {photos.map((photo) => (
    <PhotoCard
      key={photo.id}
      photo={photo}
      onDelete={onDeletePhoto}
      showTag={showTag}
    />
  ))}
</div>
```

---

## 🎯 **Використання в компонентах:**

### **1. Перемикання групування:**

```typescript
// Стан для групування
const [groupBy, setGroupBy] = useState<"tag" | "pair">("tag");

// Кнопки перемикання
<Button
  variant={groupBy === "tag" ? "default" : "secondary"}
  onClick={() => setGroupBy("tag")}
>
  <Grid className="h-4 w-4 mr-2" />
  За мітками
</Button>

<Button
  variant={groupBy === "pair" ? "default" : "secondary"}
  onClick={() => setGroupBy("pair")}
>
  <List className="h-4 w-4 mr-2" />
  За парами
</Button>
```

### **2. Відображення з групуванням:**

```typescript
<GroupedPhotos
  photos={photos}
  onDeletePhoto={handleDeletePhoto}
  showTag={true}
  groupBy={groupBy}
/>
```

---

## 📊 **Приклади групування:**

### **1. Групування за мітками:**

```
┌─────────────────────────────────────┐
│              ДО (6 фото)            │
├─────────────────────────────────────┤
│ [Фото1] [Фото2] [Фото3]            │
│ [Фото4] [Фото5] [Фото6]            │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│            ПІСЛЯ (6 фото)           │
├─────────────────────────────────────┤
│ [Фото1] [Фото2] [Фото3]            │
│ [Фото4] [Фото5] [Фото6]            │
└─────────────────────────────────────┘
```

### **2. Групування за парами (3 ДО + 3 ПІСЛЯ):**

```
┌─────────────────────────────────────┐
│              ДО 1                   │
│ [Фото1] [Фото2] [Фото3]            │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│            ПІСЛЯ 1                  │
│ [Фото4] [Фото5] [Фото6]            │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│              ДО 2                   │
│ [Фото7] [Фото8] [Фото9]            │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│            ПІСЛЯ 2                  │
│ [Фото10] [Фото11] [Фото12]         │
└─────────────────────────────────────┘
```

---

## 🚀 **Переваги групування:**

### **1. Організація:**

- ✅ **Структуровані дані** - фото згруповані за логікою
- ✅ **Візуальна ясність** - легко розрізнити типи фото
- ✅ **Швидкий доступ** - до потрібних груп фото

### **2. UX:**

- ✅ **Інтуїтивність** - користувач розуміє структуру
- ✅ **Навігація** - легко знайти потрібні фото
- ✅ **Візуальні індикатори** - кольорові мітки та заголовки

### **3. Функціональність:**

- ✅ **Гнучкість** - можна перемикати між типами групування
- ✅ **Масштабованість** - працює з будь-якою кількістю фото
- ✅ **Адаптивність** - підлаштовується під різні екрани

---

## 🎯 **Результат:**

### **До групування:**

```
[Фото1] [Фото2] [Фото3] [Фото4] [Фото5] [Фото6]
[Фото7] [Фото8] [Фото9] [Фото10] [Фото11] [Фото12]
```

### **Після групування (3 ДО + 3 ПІСЛЯ):**

```
┌─────────────────────────────────────┐
│              ДО 1                   │
│ [Фото1] [Фото2] [Фото3]            │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│            ПІСЛЯ 1                  │
│ [Фото4] [Фото5] [Фото6]            │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│              ДО 2                   │
│ [Фото7] [Фото8] [Фото9]            │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│            ПІСЛЯ 2                  │
│ [Фото10] [Фото11] [Фото12]         │
└─────────────────────────────────────┘
```

**Результат:** Структурована, зрозуміла та ефективна організація фото! 🎉
