# üè∑Ô∏è –ú—ñ—Ç–∫–∏ –¥–ª—è —Ñ–æ—Ç–æ - –°–∏—Å—Ç–µ–º–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó

## üìã **–û–≥–ª—è–¥ —Å–∏—Å—Ç–µ–º–∏ –º—ñ—Ç–æ–∫:**

### **–¢–∏–ø–∏ –º—ñ—Ç–æ–∫:**

- **`before`** - –§–æ—Ç–æ "–î–æ" (—Å–∏–Ω—è –º—ñ—Ç–∫–∞)
- **`after`** - –§–æ—Ç–æ "–ü—ñ—Å–ª—è" (–∑–µ–ª–µ–Ω–∞ –º—ñ—Ç–∫–∞)
- **`general`** - –ó–∞–≥–∞–ª—å–Ω—ñ —Ñ–æ—Ç–æ (—Å—ñ—Ä–∞ –º—ñ—Ç–∫–∞)

### **–ü–µ—Ä–µ–≤–∞–≥–∏ –º—ñ—Ç–æ–∫:**

1. **–§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –Ω–∞ –±–µ–∫–µ–Ω–¥—ñ** - —Å–µ—Ä–≤–µ—Ä –º–æ–∂–µ –≤—ñ–¥–¥–∞–≤–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ –ø–æ—Ç—Ä—ñ–±–Ω—ñ —Ñ–æ—Ç–æ
2. **–°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è** - –º–æ–∂–Ω–∞ —Å–æ—Ä—Ç—É–≤–∞—Ç–∏ –∑–∞ –º—ñ—Ç–∫–∞–º–∏
3. **–ì—Ä—É–ø—É–≤–∞–Ω–Ω—è** - –ª–µ–≥–∫–æ –≥—Ä—É–ø—É–≤–∞—Ç–∏ —Ñ–æ—Ç–æ –∑–∞ —Ç–∏–ø–æ–º
4. **–®–≤–∏–¥–∫—ñ—Å—Ç—å** - –º–µ–Ω—à–µ –¥–∞–Ω–∏—Ö –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –ø–æ –º–µ—Ä–µ–∂—ñ

---

## üîß **–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è:**

### **1. –û–Ω–æ–≤–ª–µ–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å Photo:**

```typescript
export interface Photo {
  id: number;
  url: string;
  title: string;
  description?: string;
  albumId: number;
  tag?: "before" | "after" | "general"; // üè∑Ô∏è –ú—ñ—Ç–∫–∞ –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó
  createdAt: string;
  updatedAt: string;
}
```

### **2. –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –Ω–∞ –±–µ–∫–µ–Ω–¥—ñ:**

```typescript
// –û—Ç—Ä–∏–º–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ —Ñ–æ—Ç–æ "–î–æ"
GET /api/v1/gallery/albums/2/photos?tag=before

// –û—Ç—Ä–∏–º–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ —Ñ–æ—Ç–æ "–ü—ñ—Å–ª—è"
GET /api/v1/gallery/albums/2/photos?tag=after

// –°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –∑–∞ –¥–∞—Ç–æ—é —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è
GET /api/v1/gallery/albums/2/photos?tag=before&sortBy=createdAt&sortOrder=desc
```

### **3. API —Ñ—É–Ω–∫—Ü—ñ—ó:**

```typescript
// –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è —Ñ–æ—Ç–æ –∑–∞ –º—ñ—Ç–∫–∞–º–∏
getPhotosWithFilters: (albumId: string, filters?: PhotoFilters) => {
  const params = new URLSearchParams();
  if (filters?.tag) params.append('tag', filters.tag);
  if (filters?.sortBy) params.append('sortBy', filters.sortBy);
  if (filters?.sortOrder) params.append('sortOrder', filters.sortOrder);

  return api.get<GetPhotosResponse>(`/gallery/albums/${albumId}/photos?${params.toString()}`);
},

// –û—Ç—Ä–∏–º–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ —Ñ–æ—Ç–æ "–î–æ"
getBeforePhotos: (albumId: string) =>
  api.get<Photo[]>(`/gallery/albums/${albumId}/photos?tag=before`),

// –û—Ç—Ä–∏–º–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ —Ñ–æ—Ç–æ "–ü—ñ—Å–ª—è"
getAfterPhotos: (albumId: string) =>
  api.get<Photo[]>(`/gallery/albums/${albumId}/photos?tag=after`),
```

---

## üéØ **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö:**

### **1. –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–æ—Ç–æ –∑ –º—ñ—Ç–∫–∞–º–∏:**

```typescript
// –§–æ—Ç–æ "–î–æ"
const formData = new FormData();
formData.append("file", file);
formData.append("albumId", selectedAlbum.id.toString());
formData.append("title", `–î–æ ${index + 1}`);
formData.append("description", `–§–æ—Ç–æ –¥–æ ${index + 1}`);
formData.append("tag", "before"); // üè∑Ô∏è –ú—ñ—Ç–∫–∞ "–î–æ"

// –§–æ—Ç–æ "–ü—ñ—Å–ª—è"
const formData = new FormData();
formData.append("file", file);
formData.append("albumId", selectedAlbum.id.toString());
formData.append("title", `–ü—ñ—Å–ª—è ${index + 1}`);
formData.append("description", `–§–æ—Ç–æ –ø—ñ—Å–ª—è ${index + 1}`);
formData.append("tag", "after"); // üè∑Ô∏è –ú—ñ—Ç–∫–∞ "–ü—ñ—Å–ª—è"
```

### **2. –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ñ–æ—Ç–æ –∑ –º—ñ—Ç–∫–∞–º–∏:**

```typescript
// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç PhotoCard –∑ –º—ñ—Ç–∫–∞–º–∏
<PhotoCard
  photo={photo}
  onDelete={handleDeletePhoto}
  showTag={true} // –ü–æ–∫–∞–∑—É–≤–∞—Ç–∏ –º—ñ—Ç–∫—É
/>
```

### **3. –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –≤ UI:**

```typescript
// –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ç—ñ–ª—å–∫–∏ —Ñ–æ—Ç–æ "–î–æ"
const beforePhotos = await loadBeforePhotos(albumId);

// –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ç—ñ–ª—å–∫–∏ —Ñ–æ—Ç–æ "–ü—ñ—Å–ª—è"
const afterPhotos = await loadAfterPhotos(albumId);

// –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∑ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏
const filteredPhotos = await galleryApi.getPhotosWithFilters(albumId, {
  tag: "before",
  sortBy: "createdAt",
  sortOrder: "desc",
  limit: 10,
});
```

---

## üöÄ **–ü–µ—Ä–µ–≤–∞–≥–∏ –¥–ª—è –±–µ–∫–µ–Ω–¥—É:**

### **1. –ï—Ñ–µ–∫—Ç–∏–≤–Ω—ñ –∑–∞–ø–∏—Ç–∏:**

```sql
-- –ó–∞–º—ñ—Å—Ç—å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤—Å—ñ—Ö —Ñ–æ—Ç–æ
SELECT * FROM photos WHERE albumId = 2;

-- –ú–æ–∂–Ω–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ –ø–æ—Ç—Ä—ñ–±–Ω—ñ
SELECT * FROM photos WHERE albumId = 2 AND tag = 'before';
```

### **2. –°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –Ω–∞ —Ä—ñ–≤–Ω—ñ –ë–î:**

```sql
-- –°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –∑–∞ –º—ñ—Ç–∫–æ—é —ñ –¥–∞—Ç–æ—é
SELECT * FROM photos
WHERE albumId = 2 AND tag = 'before'
ORDER BY createdAt DESC
LIMIT 10;
```

### **3. –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è:**

```sql
-- –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è –∑ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—î—é
SELECT * FROM photos
WHERE albumId = 2 AND tag = 'after'
ORDER BY createdAt DESC
LIMIT 10 OFFSET 20;
```

---

## üìä **–ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**

### **1. –ì–∞–ª–µ—Ä–µ—è "–î–æ/–ü—ñ—Å–ª—è":**

```typescript
// –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ñ–æ—Ç–æ "–î–æ" –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–∞—Ä
const beforePhotos = await galleryApi.getBeforePhotos(albumId);

// –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ñ–æ—Ç–æ "–ü—ñ—Å–ª—è" –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–∞—Ä
const afterPhotos = await galleryApi.getAfterPhotos(albumId);

// –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–∞—Ä–∏ –∑ –≤—ñ–¥—Ñ—ñ–ª—å—Ç—Ä–æ–≤–∞–Ω–∏—Ö —Ñ–æ—Ç–æ
for (let i = 0; i < 3; i++) {
  await createPair({
    albumId: albumId,
    beforePhotoId: beforePhotos[i].id,
    afterPhotoId: afterPhotos[i].id,
    label: `–ü–∞—Ä–∞ ${i + 1}`,
  });
}
```

### **2. –ê–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å:**

```typescript
// –ü–æ–∫–∞–∑–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ —Ñ–æ—Ç–æ "–î–æ" –≤ —Ä–æ–∑–¥—ñ–ª—ñ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–∞—Ä
const beforePhotos = await loadBeforePhotos(selectedAlbum.id);

// –ü–æ–∫–∞–∑–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ —Ñ–æ—Ç–æ "–ü—ñ—Å–ª—è" –≤ —Ä–æ–∑–¥—ñ–ª—ñ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–∞—Ä
const afterPhotos = await loadAfterPhotos(selectedAlbum.id);
```

### **3. –ü—É–±–ª—ñ—á–Ω–∞ –≥–∞–ª–µ—Ä–µ—è:**

```typescript
// –ü–æ–∫–∞–∑–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ –∑–∞–≥–∞–ª—å–Ω—ñ —Ñ–æ—Ç–æ –≤ –ø—É–±–ª—ñ—á–Ω—ñ–π –≥–∞–ª–µ—Ä–µ—ó
const generalPhotos = await galleryApi.getPhotosWithFilters(albumId, {
  tag: "general",
  sortBy: "createdAt",
  sortOrder: "desc",
});
```

---

## üéØ **–†–µ–∑—É–ª—å—Ç–∞—Ç:**

### **–î–æ –º—ñ—Ç–æ–∫:**

```typescript
// ‚ùå –ó–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞–ª–∏ –≤—Å—ñ —Ñ–æ—Ç–æ
const allPhotos = await galleryApi.getPhotos(albumId);
const beforePhotos = allPhotos.filter((photo) => photo.title.includes("–î–æ"));
const afterPhotos = allPhotos.filter((photo) => photo.title.includes("–ü—ñ—Å–ª—è"));
```

### **–ü—ñ—Å–ª—è –º—ñ—Ç–æ–∫:**

```typescript
// ‚úÖ –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ —Ç—ñ–ª—å–∫–∏ –ø–æ—Ç—Ä—ñ–±–Ω—ñ —Ñ–æ—Ç–æ
const beforePhotos = await galleryApi.getBeforePhotos(albumId);
const afterPhotos = await galleryApi.getAfterPhotos(albumId);
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –®–≤–∏–¥—à–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è, –º–µ–Ω—à–µ —Ç—Ä–∞—Ñ—ñ–∫—É, –∫—Ä–∞—â–∞ –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—è! üöÄ


