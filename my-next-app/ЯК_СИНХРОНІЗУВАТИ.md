# üîÑ –Ø–∫ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ API –º—ñ–∂ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º —ñ –±–µ–∫–µ–Ω–¥–æ–º

## üìã **–ü—Ä–∞–∫—Ç–∏—á–Ω—ñ –º–µ—Ç–æ–¥–∏ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó:**

### **1. üéØ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–ø—ñ–ª—å–Ω–∏—Ö —Ç–∏–ø—ñ–≤**

#### **–ö—Ä–æ–∫ 1: –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ñ–∞–π–ª `shared-types.ts`**

```typescript
// –°–ø—ñ–ª—å–Ω—ñ —Ç–∏–ø–∏ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É —ñ –±–µ–∫–µ–Ω–¥—É
export interface CreatePairRequest {
  albumId: number; // ‚úÖ number, –Ω–µ string
  beforePhotoId: number; // ‚úÖ number, –Ω–µ string
  afterPhotoId: number; // ‚úÖ number, –Ω–µ string
  label?: string;
}
```

#### **–ö—Ä–æ–∫ 2: –Ü–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –≤ API –∫–ª—ñ—î–Ω—Ç**

```typescript
import { CreatePairRequest, CreatePairResponse } from "../../shared-types";
```

### **2. üîç –í–∞–ª—ñ–¥–∞—Ü—ñ—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ñ**

#### **–î–æ–¥–∞—Ç–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é –≤ API –∫–ª—ñ—î–Ω—Ç:**

```typescript
const validateCreatePairData = (data: CreatePairRequest): string[] => {
  const errors: string[] = [];

  if (!data.albumId || typeof data.albumId !== "number" || data.albumId < 1) {
    errors.push("albumId must be a positive number");
  }

  if (
    !data.beforePhotoId ||
    typeof data.beforePhotoId !== "number" ||
    data.beforePhotoId < 1
  ) {
    errors.push("beforePhotoId must be a positive number");
  }

  if (
    !data.afterPhotoId ||
    typeof data.afterPhotoId !== "number" ||
    data.afterPhotoId < 1
  ) {
    errors.push("afterPhotoId must be a positive number");
  }

  return errors;
};
```

#### **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é –≤ API —Ñ—É–Ω–∫—Ü—ñ—ó:**

```typescript
createPair: async (data: CreatePairRequest): Promise<{ data: CreatePairResponse }> => {
  // –í–∞–ª—ñ–¥–∞—Ü—ñ—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ñ
  const validationErrors = validateCreatePairData(data);
  if (validationErrors.length > 0) {
    throw new Error(`Validation failed: ${validationErrors.join(', ')}`);
  }

  return api.post<CreatePairResponse>("/gallery/pairs", data);
},
```

### **3. üõ°Ô∏è –í–∞–ª—ñ–¥–∞—Ü—ñ—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ**

#### **–î–æ–¥–∞—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –≤ `handleCreatePair`:**

```typescript
// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–∞–ª—ñ–¥–Ω–æ—Å—Ç—ñ –¥–∞–Ω–∏—Ö
if (isNaN(pairData.albumId) || pairData.albumId < 1) {
  throw new Error(`Invalid albumId: ${selectedAlbum.id}`);
}
if (isNaN(pairData.beforePhotoId) || pairData.beforePhotoId < 1) {
  throw new Error(`Invalid beforePhotoId: ${beforePhoto.id}`);
}
if (isNaN(pairData.afterPhotoId) || pairData.afterPhotoId < 1) {
  throw new Error(`Invalid afterPhotoId: ${afterPhoto.id}`);
}
```

---

## üéØ **–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ñ –∫—Ä–æ–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó:**

### **–ö—Ä–æ–∫ 1: –í–∏–∑–Ω–∞—á–∏—Ç–∏ –Ω–µ–≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç—ñ**

```typescript
// ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –§—Ä–æ–Ω—Ç–µ–Ω–¥ –≤—ñ–¥–ø—Ä–∞–≤–ª—è–≤
{
  albumId: "2",              // string
  beforePhotos: ["url1"],     // –º–∞—Å–∏–≤ URL
  afterPhotos: ["url2"]       // –º–∞—Å–∏–≤ URL
}

// ‚úÖ –†—ñ—à–µ–Ω–Ω—è: –ë–µ–∫–µ–Ω–¥ –æ—á—ñ–∫—É–≤–∞–≤
{
  albumId: 2,                 // number
  beforePhotoId: 34,          // number ID
  afterPhotoId: 37            // number ID
}
```

### **–ö—Ä–æ–∫ 2: –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ —Ç–∏–ø–∏**

```typescript
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ç–∏–ø
export interface CreatePairRequest {
  albumId: number;
  beforePhotoId: number;
  afterPhotoId: number;
  label?: string;
}
```

### **–ö—Ä–æ–∫ 3: –û–Ω–æ–≤–∏—Ç–∏ –ª–æ–≥—ñ–∫—É —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–∞—Ä**

```typescript
// ‚úÖ –ù–æ–≤–∞ –ª–æ–≥—ñ–∫–∞: —Å—Ç–≤–æ—Ä—é—î–º–æ 3 –æ–∫—Ä–µ–º—ñ –ø–∞—Ä–∏
const pairs = [];
for (let i = 0; i < 3; i++) {
  const beforePhoto = photos.find((photo) => photo.url === beforePhotoUrls[i]);
  const afterPhoto = photos.find((photo) => photo.url === afterPhotoUrls[i]);

  if (beforePhoto && afterPhoto) {
    pairs.push({
      albumId: parseInt(selectedAlbum.id), // string ‚Üí number
      beforePhotoId: parseInt(beforePhoto.id), // string ‚Üí number
      afterPhotoId: parseInt(afterPhoto.id), // string ‚Üí number
      label: `${pairForm.label || "–ü–∞—Ä–∞"} ${i + 1}`,
    });
  }
}

// –°—Ç–≤–æ—Ä—é—î–º–æ –≤—Å—ñ –ø–∞—Ä–∏
for (const pairData of pairs) {
  await galleryApi.createPair(pairData);
}
```

---

## üîß **–Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó:**

### **1. TypeScript –¥–ª—è —Ç–∏–ø–æ–±–µ–∑–ø–µ–∫–∏**

- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–∏–ø—ñ–≤ –Ω–∞ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó
- ‚úÖ –ê–≤—Ç–æ–∫–æ–º–ø–ª—ñ—Ç –≤ IDE
- ‚úÖ –ó–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –ø–æ–º–∏–ª–∫–∞–º

### **2. –í–∞–ª—ñ–¥–∞—Ü—ñ—è –Ω–∞ —Ä—ñ–∑–Ω–∏—Ö —Ä—ñ–≤–Ω—è—Ö**

- ‚úÖ **–†—ñ–≤–µ–Ω—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:** –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–∞–Ω–∏—Ö –ø–µ—Ä–µ–¥ –≤—ñ–¥–ø—Ä–∞–≤–∫–æ—é
- ‚úÖ **–†—ñ–≤–µ–Ω—å API:** –í–∞–ª—ñ–¥–∞—Ü—ñ—è –≤ API –∫–ª—ñ—î–Ω—Ç—ñ
- ‚úÖ **–†—ñ–≤–µ–Ω—å –±–µ–∫–µ–Ω–¥—É:** –í–∞–ª—ñ–¥–∞—Ü—ñ—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ

### **3. –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —Ç–∏–ø–∏**

- ‚úÖ –û–¥–∏–Ω —Ñ–∞–π–ª –∑ —É—Å—ñ–º–∞ —Ç–∏–ø–∞–º–∏
- ‚úÖ –ü–µ—Ä–µ–≤–∞–∂–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ –æ–±–æ—Ö —á–∞—Å—Ç–∏–Ω–∞—Ö
- ‚úÖ –õ–µ–≥–∫–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–∏ –∑–º—ñ–Ω–∞—Ö

---

## üìä **–†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó:**

### **–î–æ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó:**

```json
// ‚ùå –ü–æ–º–∏–ª–∫–∞ 400 Bad Request
{
  "statusCode": 400,
  "message": [
    "albumId must be a positive number",
    "beforePhotoId must be a positive number",
    "afterPhotoId must be a positive number"
  ]
}
```

### **–ü—ñ—Å–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó:**

```json
// ‚úÖ –£—Å–ø—ñ—à–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å
{
  "id": 79,
  "albumId": 2,
  "beforePhotoId": 34,
  "afterPhotoId": 37,
  "label": "–ü–∞—Ä–∞ 1",
  "createdAt": "2025-01-18T14:11:02.983Z"
}
```

---

## üöÄ **–ü–µ—Ä–µ–≤–∞–≥–∏ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó:**

### **1. –¢–∏–ø–æ–±–µ–∑–ø–µ–∫–∞**

- ‚úÖ –ù–µ–º–æ–∂–ª–∏–≤–æ –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ –¥–∞–Ω—ñ
- ‚úÖ TypeScript –ø–µ—Ä–µ–≤—ñ—Ä—è—î —Ç–∏–ø–∏ –Ω–∞ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó
- ‚úÖ –ê–≤—Ç–æ–∫–æ–º–ø–ª—ñ—Ç –≤ IDE

### **2. –í–∞–ª—ñ–¥–∞—Ü—ñ—è**

- ‚úÖ –†–∞–Ω–Ω—î –≤–∏—è–≤–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫
- ‚úÖ –ö—Ä–∞—â–∏–π UX –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- ‚úÖ –ú–µ–Ω—à–µ –ø–æ–º–∏–ª–æ–∫ –≤ production

### **3. –ü—ñ–¥—Ç—Ä–∏–º–∫–∞**

- ‚úÖ –õ–µ–≥–∫–æ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ API
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —Ç–∏–ø–∏
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è —á–µ—Ä–µ–∑ —Ç–∏–ø–∏

---

## üéØ **–í–∏—Å–Ω–æ–≤–æ–∫:**

**–°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è = –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–ø—ñ–ª—å–Ω–∏—Ö —Ç–∏–ø—ñ–≤ + –í–∞–ª—ñ–¥–∞—Ü—ñ—è + –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –ª–æ–≥—ñ–∫–∞**

1. **–°—Ç–≤–æ—Ä–∏—Ç–∏ —Å–ø—ñ–ª—å–Ω—ñ —Ç–∏–ø–∏** –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É —ñ –±–µ–∫–µ–Ω–¥—É
2. **–î–æ–¥–∞—Ç–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é** –Ω–∞ –≤—Å—ñ—Ö —Ä—ñ–≤–Ω—è—Ö
3. **–û–Ω–æ–≤–∏—Ç–∏ –ª–æ–≥—ñ–∫—É** –¥–ª—è –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö
4. **–¢–µ—Å—Ç—É–≤–∞—Ç–∏** —á–µ—Ä–µ–∑ API –∑–∞–ø–∏—Ç–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–≤–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –º—ñ–∂ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º —ñ –±–µ–∫–µ–Ω–¥–æ–º! üéâ

